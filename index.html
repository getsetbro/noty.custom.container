<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Notification</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="demonstration of some noty capabilities">
    <style type="text/css">
    body {font-family: sans-serif;}
    .cntr{width: 200px; margin:10px; border: 1px solid #ddd; padding: 10px;display: none}
    .cntr1 .noty_buttons{display: none}
    </style>
</head>
<body>
  <input type="file" multiple id="input" onchange="handleFiles(this.files)" />
    <div class="cntr">
        <div class="cntr1"></div>
        <br>
        <div class="cntr2"></div>
    </div>
    <script src="javascripts/jquery1.10.2.min.js"></script>
    <script src="javascripts/jquery.noty.js"></script>
    <script src="javascripts/noty.inline.js"></script>
    <script src="javascripts/noty.default.js"></script>

    <script type="text/javascript">

function listNoty(type, txt) {

    var ln = $('.cntr1').noty({
        text: txt,
        type: type,
        dismissQueue: true,
        theme: 'defaultTheme',
        closeWith: [],
        buttons:[
            {addClass: 'btn btn-primary', text: 'Ok', onClick: function ($noty) {
                $noty.close();
                $('.cntr').hide();
            }
          }
        ]
    });
  return ln;
}
var count = 0;
var completed = 0;
var list;
var ids = [];
function completeImg(id){
    $.noty.setText(id, 'Upload complete');
    $.noty.setType(id, 'success');
    completed ++;
    if(completed === count){
      $.each(ids, function(k, id){
        $.noty.close(id);
      });
      $.noty.setText(list.options.id, 'List saved'); // same as alert.setText('Text Override')
      $.noty.setType(list.options.id, 'notification');

      $('.cntr1 .noty_buttons').show();
    }
}

function imageNoty(txt) {
  var n = $('.cntr2').noty({
      text: txt,
      type: alert,
      dismissQueue: true,
      theme: 'defaultTheme',
      closeWith: [],
      maxVisible: 15
  });
  ids.push(n.options.id);
  $(document.body).append('<button type="button" onClick=\'completeImg("'+n.options.id+'"); $(this).hide();\'>complete ' + n.options.id + '</button>');

}
function handleFiles(files) {
  if(files.length){
    $('.cntr').show();
    list = listNoty('warning', 'Saving list');
    $.each(files, function(k,v){
      imageNoty(v.name);
      count++;
    });
  }

}

    </script>
</body>

</html>
